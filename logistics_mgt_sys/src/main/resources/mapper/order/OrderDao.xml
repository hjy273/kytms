<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace指用户自定义的命名空间 -->
<mapper namespace="com.t28.forest.order.dao.OrderDao">

    <select id="planned" resultType="com.t28.forest.order.vo.presco">
        select
        presco0_.ID as col_0_0_,
        organizati1_.NAME as col_1_0_,
        presco0_.STATUS as col_2_0_,
        zone4_.NAME as col_3_0_,
        presco0_.FH_NAME as col_4_0_,
        presco0_.FH_ADDRESS as col_5_0_,
        presco0_.WEIGHT as col_6_0_,
        presco0_.NUMBER as col_7_0_,
        presco0_.VOLUME as col_8_0_,
        presco0_.FH_PERSON as col_9_0_,
        presco0_.FH_IPHONE as col_10_0_,
        presco0_.CODE as col_11_0_,
        presco0_.COSTOMER_TPYE as col_12_0_,
        presco0_.RELATEBILL1 as col_13_0_,
        presco0_.DATE_ACCEPTED as col_14_0_,
        presco0_.SH_NAME as col_15_0_,
        presco0_.SH_PERSON as col_16_0_,
        presco0_.SH_IPHONE as col_17_0_,
        presco0_.SH_ADDRESS as col_18_0_,
        presco0_.DESCRIPTION as col_19_0_,
        presco0_.CREATE_NAME as col_20_0_,
        presco0_.CREATE_TIME as col_21_0_,
        presco0_.MODIFY_NAME as col_22_0_,
        presco0_.MODIFY_TIME as col_23_0_,
        presco0_.STATUS as col_24_0_
        from JC_PRESCO presco0_
        left outer join JC_SYS_ORGANIZATION organizati1_ on presco0_.JC_ORGANIZATION_ID=organizati1_.ID
        left outer join JC_SERVER_ZONE serverzone3_ on presco0_.JC_SERVER_ZONE_ID=serverzone3_.ID
        left outer join JC_ZONE zone4_ on serverzone3_.JC_ZONE_ID=zone4_.ID
        where 1=1
        and organizati1_.ID='402881a36710579c016710c4e2fb0230'
        and presco0_.STATUS != 99 and presco0_.STATUS != 100 order by presco0_.CREATE_TIME desc limit 5
        <if test="rc!=null">
            and #{rc} = '%${input}%'
        </if>
    </select>

    <select id="orders" resultType="com.t28.forest.order.vo.order">
        select order0_.ID as col_0_0_,
        organizati1_.NAME as col_1_0_,
        order0_.CODE as col_2_0_,
        order0_.RELATEBILL1 as col_3_0_,
        order0_.RELATEBILL2 as col_4_0_,
        order0_.TIME as col_5_0_,
        order0_.STATUS as col_6_0_,
        order0_.COSTOMER_TYPE as col_7_0_,
        order0_.IS_TAKE as col_8_0_,
        case when order0_.COSTOMER_TYPE=1 then customer2_.NAME when order0_.COSTOMER_TYPE=0 then order0_.COSTOMER_NAME end as col_9_0_,
        order0_.FEE_TYEP as col_10_0_,
        order0_.IS_INOUTCOME as col_11_0_,
        zone7_.NAME as col_12_0_,
        zone9_.NAME as col_14_0_,
        order0_.HANDOVER_TYPE as col_15_0_,
        orderprodu3_.NAME as col_16_0_,
        (select sum(ledgerdeta11_.AMOUNT) from JC_LEDGER_DETAIL ledgerdeta11_ left outer join JC_ORDER order12_ on ledgerdeta11_.JC_ORDER_ID=order12_.ID where order12_.ID=order0_.ID) as sumAmount,
        order0_.NUMBER as col_18_0_,
        order0_.WEIGHT as col_19_0_,
        order0_.VOLUME as col_20_0_,
        order0_.JZ_WEIGHT as col_21_0_,
        order0_.FACT_ARRIVE_TIME as col_22_0_,
        1 as col_24_0_,
        order0_.COSTOMER_IS_EXCEED as col_25_0_,
        order0_.SALE_PERSION as col_26_0_,
        order0_.TRANSPORT_PRO as col_27_0_,
        order0_.IS_BACK as col_28_0_,
        order0_.BACK_NUMBER as col_29_0_,
        zonestorer4_.NAME as col_30_0_,
        order0_.ORDER_MILEAGE as col_31_0_,
        order0_.DESCRIPTION as col_32_0_,
        order0_.CREATE_NAME as col_33_0_,
        order0_.CREATE_TIME as col_34_0_,
        order0_.MODIFY_NAME as col_35_0_,
        order0_.MODIFY_TIME as col_36_0_
        from JC_ORDER order0_
        left outer join JC_SYS_ORGANIZATION organizati1_ on order0_.JC_ORGANIZATION_ID=organizati1_.ID
        left outer join JC_CUSTOMER customer2_ on order0_.JC_CUSTOMER_ID=customer2_.ID
        left outer join JC_ORDER_PRODUCT orderprodu3_ on order0_.ID=orderprodu3_.JC_ORDER_ID
        left outer join JC_ZONE_STOREROOM zonestorer4_ on order0_.JC_ZONE_STOREROOM_ID=zonestorer4_.ID
        left outer join JC_SYS_ORGANIZATION organizati5_ on order0_.JC_TO_ORGANIZATION_ID=organizati5_.ID
        left outer join JC_SERVER_ZONE serverzone6_ on order0_.JC_START_ZONE_ID=serverzone6_.ID
        left outer join JC_ZONE zone7_ on serverzone6_.JC_ZONE_ID=zone7_.ID
        left outer join JC_SERVER_ZONE serverzone8_ on order0_.JC_END_ZONE_ID=serverzone8_.ID
        left outer join JC_ZONE zone9_ on serverzone8_.JC_ZONE_ID=zone9_.ID
        left outer join JC_LEDGER_DETAIL ledgerdeta10_ on order0_.ID=ledgerdeta10_.JC_ORDER_ID
        where 1=1
        and organizati1_.ID='402881a36710579c016710c4e2fb0230'
        and order0_.STATUS!=0
        and order0_.STATUS!=99
        <if test="rc!=null">
            and #{rc} = '%${input}%'
        </if>
        group by order0_.ID
        order by order0_.CREATE_TIME desc limit 5
    </select>
</mapper>